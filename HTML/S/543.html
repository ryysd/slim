<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>third_party/google-perftools-1.8.3/src/base/sysinfo.h</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.1' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<a id='TOP' name='TOP' /><h2 class='header'><a href='../mains.html'>root</a>/<a href='../files/738.html'>third_party</a>/<a href='../files/739.html'>google-perftools-1.8.3</a>/<a href='../files/740.html'>src</a>/<a href='../files/741.html'>base</a>/sysinfo.h</h2>
<em class='comment'>/* [&lt;][&gt;][^][v][top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</em>
<hr />
<h2 class='header'><a href='../J/167.html' title='Multiple included from 11 places.'>INCLUDED FROM</a></h2>
<hr />
<pre>
<a id='L1' name='L1' /><em class='comment'>// Copyright (c) 2006, Google Inc.</em>
<a id='L2' name='L2' /><em class='comment'>// All rights reserved.</em>
<a id='L3' name='L3' /><em class='comment'>// </em>
<a id='L4' name='L4' /><em class='comment'>// Redistribution and use in source and binary forms, with or without</em>
<a id='L5' name='L5' /><em class='comment'>// modification, are permitted provided that the following conditions are</em>
<a id='L6' name='L6' /><em class='comment'>// met:</em>
<a id='L7' name='L7' /><em class='comment'>// </em>
<a id='L8' name='L8' /><em class='comment'>//     * Redistributions of source code must retain the above copyright</em>
<a id='L9' name='L9' /><em class='comment'>// notice, this list of conditions and the following disclaimer.</em>
<a id='L10' name='L10' /><em class='comment'>//     * Redistributions in binary form must reproduce the above</em>
<a id='L11' name='L11' /><em class='comment'>// copyright notice, this list of conditions and the following disclaimer</em>
<a id='L12' name='L12' /><em class='comment'>// in the documentation and/or other materials provided with the</em>
<a id='L13' name='L13' /><em class='comment'>// distribution.</em>
<a id='L14' name='L14' /><em class='comment'>//     * Neither the name of Google Inc. nor the names of its</em>
<a id='L15' name='L15' /><em class='comment'>// contributors may be used to endorse or promote products derived from</em>
<a id='L16' name='L16' /><em class='comment'>// this software without specific prior written permission.</em>
<a id='L17' name='L17' /><em class='comment'>// </em>
<a id='L18' name='L18' /><em class='comment'>// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</em>
<a id='L19' name='L19' /><em class='comment'>// "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</em>
<a id='L20' name='L20' /><em class='comment'>// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</em>
<a id='L21' name='L21' /><em class='comment'>// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</em>
<a id='L22' name='L22' /><em class='comment'>// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</em>
<a id='L23' name='L23' /><em class='comment'>// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</em>
<a id='L24' name='L24' /><em class='comment'>// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</em>
<a id='L25' name='L25' /><em class='comment'>// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</em>
<a id='L26' name='L26' /><em class='comment'>// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</em>
<a id='L27' name='L27' /><em class='comment'>// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</em>
<a id='L28' name='L28' /><em class='comment'>// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</em>
<a id='L29' name='L29' />
<a id='L30' name='L30' /><em class='comment'>// All functions here are thread-hostile due to file caching unless</em>
<a id='L31' name='L31' /><em class='comment'>// commented otherwise.</em>
<a id='L32' name='L32' />
<a id='L33' name='L33' /><em class='sharp'>#ifndef</em> <a href='../S/543.html#L34' title='Defined at 34 in third_party/google-perftools-1.8.3/src/base/sysinfo.h.'>_SYSINFO_H_</a>
<a id='L34' name='L34' /><em class='sharp'>#define</em> <a href='../S/543.html#L33' title='Refered from 33 in third_party/google-perftools-1.8.3/src/base/sysinfo.h.'>_SYSINFO_H_</a>
<a id='L35' name='L35' />
<a id='L36' name='L36' /><em class='sharp'>#include</em> &lt;<a href='../I/6.html'>config.h</a>&gt;
<a id='L37' name='L37' />
<a id='L38' name='L38' /><em class='sharp'>#include</em> &lt;time.h&gt;
<a id='L39' name='L39' /><em class='sharp'>#if</em> (<strong class='reserved'>defined</strong>(<a href='../Y/997.html' title='Multiple used in 42 places.'>_WIN32</a>) || <strong class='reserved'>defined</strong>(<a href='../Y/1053.html' title='Multiple used in 17 places.'>__MINGW32__</a>)) &amp;&amp; (!<strong class='reserved'>defined</strong>(<a href='../S/310.html#L11' title='Defined at 11 in src/arch.h.'>__CYGWIN__</a>) &amp;&amp; !<strong class='reserved'>defined</strong>(<a href='../Y/1035.html' title='Multiple used in 24 places.'>__CYGWIN32__</a>))
<a id='L40' name='L40' /><em class='sharp'>#include</em> &lt;windows.h&gt;   <em class='comment'>// for DWORD</em>
<a id='L41' name='L41' /><em class='sharp'>#include</em> &lt;TlHelp32.h&gt;  <em class='comment'>// for CreateToolhelp32Snapshot</em>
<a id='L42' name='L42' /><em class='sharp'>#endif</em>
<a id='L43' name='L43' /><em class='sharp'>#ifdef</em> <a href='../D/955.html' title='Multiple defined in 4 places.'>HAVE_UNISTD_H</a>
<a id='L44' name='L44' /><em class='sharp'>#include</em> &lt;unistd.h&gt;    <em class='comment'>// for pid_t</em>
<a id='L45' name='L45' /><em class='sharp'>#endif</em>
<a id='L46' name='L46' /><em class='sharp'>#include</em> &lt;stddef.h&gt;    <em class='comment'>// for size_t</em>
<a id='L47' name='L47' /><em class='sharp'>#include</em> &lt;limits.h&gt;    <em class='comment'>// for PATH_MAX</em>
<a id='L48' name='L48' /><em class='sharp'>#include</em> "<a href='516.html'>base/basictypes.h</a>"
<a id='L49' name='L49' /><em class='sharp'>#include</em> "<a href='529.html'>base/logging.h</a>"   <em class='comment'>// for RawFD</em>
<a id='L50' name='L50' />
<a id='L51' name='L51' /><em class='comment'>// This getenv function is safe to call before the C runtime is initialized.</em>
<a id='L52' name='L52' /><em class='comment'>// On Windows, it utilizes GetEnvironmentVariable() and on unix it uses</em>
<a id='L53' name='L53' /><em class='comment'>// /proc/self/environ instead calling getenv().  It's intended to be used in</em>
<a id='L54' name='L54' /><em class='comment'>// routines that run before main(), when the state required for getenv() may</em>
<a id='L55' name='L55' /><em class='comment'>// not be set up yet.  In particular, errno isn't set up until relatively late</em>
<a id='L56' name='L56' /><em class='comment'>// (after the pthreads library has a chance to make it threadsafe), and</em>
<a id='L57' name='L57' /><em class='comment'>// getenv() doesn't work until then. </em>
<a id='L58' name='L58' /><em class='comment'>// On some platforms, this call will utilize the same, static buffer for</em>
<a id='L59' name='L59' /><em class='comment'>// repeated GetenvBeforeMain() calls. Callers should not expect pointers from</em>
<a id='L60' name='L60' /><em class='comment'>// this routine to be long lived.</em>
<a id='L61' name='L61' /><em class='comment'>// Note that on unix, /proc only has the environment at the time the</em>
<a id='L62' name='L62' /><em class='comment'>// application was started, so this routine ignores setenv() calls/etc.  Also</em>
<a id='L63' name='L63' /><em class='comment'>// note it only reads the first 16K of the environment.</em>
<a id='L64' name='L64' /><strong class='reserved'>extern</strong> <strong class='reserved'>const</strong> <strong class='reserved'>char</strong>* <a href='../S/542.html#L112' title='Defined at 112 in third_party/google-perftools-1.8.3/src/base/sysinfo.cc.'>GetenvBeforeMain</a>(<strong class='reserved'>const</strong> <strong class='reserved'>char</strong>* <a href='../Y/3665.html' title='Multiple used in 438 places.'>name</a>);
<a id='L65' name='L65' />
<a id='L66' name='L66' /><em class='comment'>// This takes as an argument an environment-variable name (like</em>
<a id='L67' name='L67' /><em class='comment'>// CPUPROFILE) whose value is supposed to be a file-path, and sets</em>
<a id='L68' name='L68' /><em class='comment'>// path to that path, and returns true.  Non-trivial for surprising</em>
<a id='L69' name='L69' /><em class='comment'>// reasons, as documented in sysinfo.cc.  path must have space PATH_MAX.</em>
<a id='L70' name='L70' /><strong class='reserved'>extern</strong> <a href='../Y/1648.html' title='Multiple used in 174 places.'>bool</a> <a href='../S/542.html#L182' title='Defined at 182 in third_party/google-perftools-1.8.3/src/base/sysinfo.cc.'>GetUniquePathFromEnv</a>(<strong class='reserved'>const</strong> <strong class='reserved'>char</strong>* <a href='../Y/2216.html' title='Multiple used in 3 places.'>env_name</a>, <strong class='reserved'>char</strong>* <a href='../Y/4129.html' title='Multiple used in 92 places.'>path</a>);
<a id='L71' name='L71' />
<a id='L72' name='L72' /><strong class='reserved'>extern</strong> <strong class='reserved'>int</strong> <a href='../S/542.html#L469' title='Defined at 469 in third_party/google-perftools-1.8.3/src/base/sysinfo.cc.'>NumCPUs</a>();
<a id='L73' name='L73' />
<a id='L74' name='L74' /><strong class='reserved'>void</strong> <a href='../S/542.html#L207' title='Defined at 207 in third_party/google-perftools-1.8.3/src/base/sysinfo.cc.'>SleepForMilliseconds</a>(<strong class='reserved'>int</strong> <a href='../Y/3542.html' title='Multiple used in 5 places.'>milliseconds</a>);
<a id='L75' name='L75' />
<a id='L76' name='L76' /><em class='comment'>// processor cycles per second of each processor.  Thread-safe.</em>
<a id='L77' name='L77' /><strong class='reserved'>extern</strong> <strong class='reserved'>double</strong> <a href='../S/542.html#L464' title='Defined at 464 in third_party/google-perftools-1.8.3/src/base/sysinfo.cc.'>CyclesPerSecond</a>(<strong class='reserved'>void</strong>);
<a id='L78' name='L78' />
<a id='L79' name='L79' />
<a id='L80' name='L80' /><em class='comment'>//  Return true if we're running POSIX (e.g., NPTL on Linux) threads,</em>
<a id='L81' name='L81' /><em class='comment'>//  as opposed to a non-POSIX thread libary.  The thing that we care</em>
<a id='L82' name='L82' /><em class='comment'>//  about is whether a thread's pid is the same as the thread that</em>
<a id='L83' name='L83' /><em class='comment'>//  spawned it.  If so, this function returns true.</em>
<a id='L84' name='L84' /><em class='comment'>//  Thread-safe.</em>
<a id='L85' name='L85' /><em class='comment'>//  Note: We consider false negatives to be OK.</em>
<a id='L86' name='L86' /><a href='../Y/1648.html' title='Multiple used in 174 places.'>bool</a> <a href='../S/542.html#L482' title='Defined at 482 in third_party/google-perftools-1.8.3/src/base/sysinfo.cc.'>HasPosixThreads</a>();
<a id='L87' name='L87' />
<a id='L88' name='L88' /><em class='sharp'>#ifndef</em> <a href='../Y/755.html' title='Multiple used in 3 places.'>SWIG</a>  <em class='comment'>// SWIG doesn't like struct Buffer and variable arguments.</em>
<a id='L89' name='L89' />
<a id='L90' name='L90' /><em class='comment'>// A ProcMapsIterator abstracts access to /proc/maps for a given</em>
<a id='L91' name='L91' /><em class='comment'>// process. Needs to be stack-allocatable and avoid using stdio/malloc</em>
<a id='L92' name='L92' /><em class='comment'>// so it can be used in the google stack dumper, heap-profiler, etc.</em>
<a id='L93' name='L93' /><em class='comment'>//</em>
<a id='L94' name='L94' /><em class='comment'>// On Windows and Mac OS X, this iterator iterates *only* over DLLs</em>
<a id='L95' name='L95' /><em class='comment'>// mapped into this process space.  For Linux, FreeBSD, and Solaris,</em>
<a id='L96' name='L96' /><em class='comment'>// it iterates over *all* mapped memory regions, including anonymous</em>
<a id='L97' name='L97' /><em class='comment'>// mmaps.  For other O/Ss, it is unlikely to work at all, and Valid()</em>
<a id='L98' name='L98' /><em class='comment'>// will always return false.  Also note: this routine only works on</em>
<a id='L99' name='L99' /><em class='comment'>// FreeBSD if procfs is mounted: make sure this is in your /etc/fstab:</em>
<a id='L100' name='L100' /><em class='comment'>//    proc            /proc   procfs  rw 0 0</em>
<a id='L101' name='L101' /><a href='../Y/1792.html' title='Multiple used in 90 places.'>class</a> <a href='../D/2219.html' title='Multiple defined in 4 places.'>ProcMapsIterator</a> <em class='brace'>{</em>
<a id='L102' name='L102' /> <a href='../Y/4390.html' title='Multiple used in 61 places.'>public</a>:
<a id='L103' name='L103' />  <strong class='reserved'>struct</strong> <a href='../R/298.html' title='Multiple refered from 27 places.'>Buffer</a> <em class='brace'>{</em>
<a id='L104' name='L104' /><em class='sharp'>#ifdef</em> <a href='../Y/1041.html' title='Multiple used in 14 places.'>__FreeBSD__</a>
<a id='L105' name='L105' />    <em class='comment'>// FreeBSD requires us to read all of the maps file at once, so</em>
<a id='L106' name='L106' />    <em class='comment'>// we have to make a buffer that's "always" big enough</em>
<a id='L107' name='L107' />    <strong class='reserved'>static</strong> <strong class='reserved'>const</strong> <a href='../D/5108.html' title='Multiple defined in 2 places.'>size_t</a> <a href='../Y/2980.html' title='Multiple used in 23 places.'>kBufSize</a> = 102400;
<a id='L108' name='L108' /><em class='sharp'>#else</em>   <em class='comment'>// a one-line buffer is good enough</em>
<a id='L109' name='L109' />    <strong class='reserved'>static</strong> <strong class='reserved'>const</strong> <a href='../D/5108.html' title='Multiple defined in 2 places.'>size_t</a> <a href='../Y/2980.html' title='Multiple used in 23 places.'>kBufSize</a> = <a href='../D/2066.html' title='Multiple defined in 3 places.'>PATH_MAX</a> + 1024;
<a id='L110' name='L110' /><em class='sharp'>#endif</em>
<a id='L111' name='L111' />    <strong class='reserved'>char</strong> <a href='../Y/1673.html' title='Multiple used in 19 places.'>buf_</a>[<a href='../Y/2980.html' title='Multiple used in 23 places.'>kBufSize</a>];
<a id='L112' name='L112' />  <em class='brace'>}</em>;
<a id='L113' name='L113' />
<a id='L114' name='L114' />
<a id='L115' name='L115' />  <em class='comment'>// Create a new iterator for the specified pid.  pid can be 0 for "self".</em>
<a id='L116' name='L116' />  <a href='../Y/2272.html' title='Multiple used in 15 places.'>explicit</a> <a href='../D/2219.html' title='Multiple defined in 4 places.'>ProcMapsIterator</a>(<a href='../S/686.html#L392' title='Defined at 392 in third_party/google-perftools-1.8.3/src/windows/port.h.'>pid_t</a> <a href='../Y/4163.html' title='Multiple used in 46 places.'>pid</a>);
<a id='L117' name='L117' />
<a id='L118' name='L118' />  <em class='comment'>// Create an iterator with specified storage (for use in signal</em>
<a id='L119' name='L119' />  <em class='comment'>// handler). "buffer" should point to a ProcMapsIterator::Buffer</em>
<a id='L120' name='L120' />  <em class='comment'>// buffer can be NULL in which case a bufer will be allocated.</em>
<a id='L121' name='L121' />  <a href='../D/2219.html' title='Multiple defined in 4 places.'>ProcMapsIterator</a>(<a href='../S/686.html#L392' title='Defined at 392 in third_party/google-perftools-1.8.3/src/windows/port.h.'>pid_t</a> <a href='../Y/4163.html' title='Multiple used in 46 places.'>pid</a>, <a href='../S/543.html#L103' title='Defined at 103 in third_party/google-perftools-1.8.3/src/base/sysinfo.h.'>Buffer</a> *<a href='../Y/1680.html' title='Multiple used in 109 places.'>buffer</a>);
<a id='L122' name='L122' />
<a id='L123' name='L123' />  <em class='comment'>// Iterate through maps_backing instead of maps if use_maps_backing</em>
<a id='L124' name='L124' />  <em class='comment'>// is true.  Otherwise the same as above.  buffer can be NULL and</em>
<a id='L125' name='L125' />  <em class='comment'>// it will allocate a buffer itself.</em>
<a id='L126' name='L126' />  <a href='../D/2219.html' title='Multiple defined in 4 places.'>ProcMapsIterator</a>(<a href='../S/686.html#L392' title='Defined at 392 in third_party/google-perftools-1.8.3/src/windows/port.h.'>pid_t</a> <a href='../Y/4163.html' title='Multiple used in 46 places.'>pid</a>, <a href='../S/543.html#L103' title='Defined at 103 in third_party/google-perftools-1.8.3/src/base/sysinfo.h.'>Buffer</a> *<a href='../Y/1680.html' title='Multiple used in 109 places.'>buffer</a>,
<a id='L127' name='L127' />                   <a href='../Y/1648.html' title='Multiple used in 174 places.'>bool</a> <a href='../Y/5561.html' title='Multiple used in 7 places.'>use_maps_backing</a>);
<a id='L128' name='L128' />
<a id='L129' name='L129' />  <em class='comment'>// Returns true if the iterator successfully initialized;</em>
<a id='L130' name='L130' />  <a href='../Y/1648.html' title='Multiple used in 174 places.'>bool</a> <a href='../D/2941.html' title='Multiple defined in 3 places.'>Valid</a>() <strong class='reserved'>const</strong>;
<a id='L131' name='L131' />
<a id='L132' name='L132' />  <em class='comment'>// Returns a pointer to the most recently parsed line. Only valid</em>
<a id='L133' name='L133' />  <em class='comment'>// after Next() returns true, and until the iterator is destroyed or</em>
<a id='L134' name='L134' />  <em class='comment'>// Next() is called again.  This may give strange results on non-Linux</em>
<a id='L135' name='L135' />  <em class='comment'>// systems.  Prefer FormatLine() if that may be a concern.</em>
<a id='L136' name='L136' />  <strong class='reserved'>const</strong> <strong class='reserved'>char</strong> *CurrentLine() <strong class='reserved'>const</strong> <em class='brace'>{</em> <strong class='reserved'>return</strong> <a href='../Y/5104.html' title='Multiple used in 17 places.'>stext_</a>; <em class='brace'>}</em>
<a id='L137' name='L137' />
<a id='L138' name='L138' />  <em class='comment'>// Writes the "canonical" form of the /proc/xxx/maps info for a single</em>
<a id='L139' name='L139' />  <em class='comment'>// line to the passed-in buffer. Returns the number of bytes written,</em>
<a id='L140' name='L140' />  <em class='comment'>// or 0 if it was not able to write the complete line.  (To guarantee</em>
<a id='L141' name='L141' />  <em class='comment'>// success, buffer should have size at least Buffer::kBufSize.)</em>
<a id='L142' name='L142' />  <em class='comment'>// Takes as arguments values set via a call to Next().  The</em>
<a id='L143' name='L143' />  <em class='comment'>// "canonical" form of the line (taken from linux's /proc/xxx/maps):</em>
<a id='L144' name='L144' />  <em class='comment'>//    &lt;start_addr(hex)&gt;-&lt;end_addr(hex)&gt; &lt;perms(rwxp)&gt; &lt;offset(hex)&gt;   +</em>
<a id='L145' name='L145' />  <em class='comment'>//    &lt;major_dev(hex)&gt;:&lt;minor_dev(hex)&gt; &lt;inode&gt; &lt;filename&gt; Note: the</em>
<a id='L146' name='L146' />  <em class='comment'>// eg</em>
<a id='L147' name='L147' />  <em class='comment'>//    08048000-0804c000 r-xp 00000000 03:01 3793678    /bin/cat</em>
<a id='L148' name='L148' />  <em class='comment'>// If you don't have the dev_t (dev), feel free to pass in 0.</em>
<a id='L149' name='L149' />  <em class='comment'>// (Next() doesn't return a dev_t, though NextExt does.)</em>
<a id='L150' name='L150' />  <em class='comment'>//</em>
<a id='L151' name='L151' />  <em class='comment'>// Note: if filename and flags were obtained via a call to Next(),</em>
<a id='L152' name='L152' />  <em class='comment'>// then the output of this function is only valid if Next() returned</em>
<a id='L153' name='L153' />  <em class='comment'>// true, and only until the iterator is destroyed or Next() is</em>
<a id='L154' name='L154' />  <em class='comment'>// called again.  (Since filename, at least, points into CurrentLine.)</em>
<a id='L155' name='L155' />  <strong class='reserved'>static</strong> <strong class='reserved'>int</strong> <a href='../S/542.html#L908' title='Defined at 908 in third_party/google-perftools-1.8.3/src/base/sysinfo.cc.'>FormatLine</a>(<strong class='reserved'>char</strong>* <a href='../Y/1680.html' title='Multiple used in 109 places.'>buffer</a>, <strong class='reserved'>int</strong> <a href='../Y/1685.html' title='Multiple used in 16 places.'>bufsize</a>,
<a id='L156' name='L156' />                        <a href='../S/516.html#L71' title='Defined at 71 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>uint64</a> <a href='../Y/5036.html' title='Multiple used in 278 places.'>start</a>, <a href='../S/516.html#L71' title='Defined at 71 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>uint64</a> <a href='../S/521.html#L388' title='Defined at 388 in third_party/google-perftools-1.8.3/src/base/elf_mem_image.cc.'>end</a>, <strong class='reserved'>const</strong> <strong class='reserved'>char</strong> *<a href='../Y/2400.html' title='Multiple used in 235 places.'>flags</a>,
<a id='L157' name='L157' />                        <a href='../S/516.html#L71' title='Defined at 71 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>uint64</a> <a href='../Y/3919.html' title='Multiple used in 128 places.'>offset</a>, <a href='../S/516.html#L60' title='Defined at 60 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>int64</a> <a href='../Y/2830.html' title='Multiple used in 33 places.'>inode</a>, <strong class='reserved'>const</strong> <strong class='reserved'>char</strong> *<a href='../S/652.html#L126' title='Defined at 126 in third_party/google-perftools-1.8.3/src/tests/profiledata_unittest.cc.'>filename</a>,
<a id='L158' name='L158' />                        <a href='../Y/2050.html' title='Multiple used in 5 places.'>dev_t</a> <a href='../Y/2049.html' title='Multiple used in 12 places.'>dev</a>);
<a id='L159' name='L159' />
<a id='L160' name='L160' />  <em class='comment'>// Find the next entry in /proc/maps; return true if found or false</em>
<a id='L161' name='L161' />  <em class='comment'>// if at the end of the file.</em>
<a id='L162' name='L162' />  <em class='comment'>//</em>
<a id='L163' name='L163' />  <em class='comment'>// Any of the result pointers can be NULL if you're not interested</em>
<a id='L164' name='L164' />  <em class='comment'>// in those values.</em>
<a id='L165' name='L165' />  <em class='comment'>//</em>
<a id='L166' name='L166' />  <em class='comment'>// If "flags" and "filename" are passed, they end up pointing to</em>
<a id='L167' name='L167' />  <em class='comment'>// storage within the ProcMapsIterator that is valid only until the</em>
<a id='L168' name='L168' />  <em class='comment'>// iterator is destroyed or Next() is called again. The caller may</em>
<a id='L169' name='L169' />  <em class='comment'>// modify the contents of these strings (up as far as the first NUL,</em>
<a id='L170' name='L170' />  <em class='comment'>// and only until the subsequent call to Next()) if desired.</em>
<a id='L171' name='L171' />
<a id='L172' name='L172' />  <em class='comment'>// The offsets are all uint64 in order to handle the case of a</em>
<a id='L173' name='L173' />  <em class='comment'>// 32-bit process running on a 64-bit kernel</em>
<a id='L174' name='L174' />  <em class='comment'>//</em>
<a id='L175' name='L175' />  <em class='comment'>// IMPORTANT NOTE: see top-of-class notes for details about what</em>
<a id='L176' name='L176' />  <em class='comment'>// mapped regions Next() iterates over, depending on O/S.</em>
<a id='L177' name='L177' />  <em class='comment'>// TODO(csilvers): make flags and filename const.</em>
<a id='L178' name='L178' />  <a href='../Y/1648.html' title='Multiple used in 174 places.'>bool</a> <a href='../D/1952.html' title='Multiple defined in 3 places.'>Next</a>(<a href='../S/516.html#L71' title='Defined at 71 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>uint64</a> *<a href='../Y/5036.html' title='Multiple used in 278 places.'>start</a>, <a href='../S/516.html#L71' title='Defined at 71 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>uint64</a> *<a href='../S/521.html#L388' title='Defined at 388 in third_party/google-perftools-1.8.3/src/base/elf_mem_image.cc.'>end</a>, <strong class='reserved'>char</strong> **<a href='../Y/2400.html' title='Multiple used in 235 places.'>flags</a>,
<a id='L179' name='L179' />            <a href='../S/516.html#L71' title='Defined at 71 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>uint64</a> *<a href='../Y/3919.html' title='Multiple used in 128 places.'>offset</a>, <a href='../S/516.html#L60' title='Defined at 60 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>int64</a> *<a href='../Y/2830.html' title='Multiple used in 33 places.'>inode</a>, <strong class='reserved'>char</strong> **<a href='../S/652.html#L126' title='Defined at 126 in third_party/google-perftools-1.8.3/src/tests/profiledata_unittest.cc.'>filename</a>);
<a id='L180' name='L180' />
<a id='L181' name='L181' />  <a href='../Y/1648.html' title='Multiple used in 174 places.'>bool</a> <a href='../S/542.html#L659' title='Defined at 659 in third_party/google-perftools-1.8.3/src/base/sysinfo.cc.'>NextExt</a>(<a href='../S/516.html#L71' title='Defined at 71 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>uint64</a> *<a href='../Y/5036.html' title='Multiple used in 278 places.'>start</a>, <a href='../S/516.html#L71' title='Defined at 71 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>uint64</a> *<a href='../S/521.html#L388' title='Defined at 388 in third_party/google-perftools-1.8.3/src/base/elf_mem_image.cc.'>end</a>, <strong class='reserved'>char</strong> **<a href='../Y/2400.html' title='Multiple used in 235 places.'>flags</a>,
<a id='L182' name='L182' />               <a href='../S/516.html#L71' title='Defined at 71 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>uint64</a> *<a href='../Y/3919.html' title='Multiple used in 128 places.'>offset</a>, <a href='../S/516.html#L60' title='Defined at 60 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>int64</a> *<a href='../Y/2830.html' title='Multiple used in 33 places.'>inode</a>, <strong class='reserved'>char</strong> **<a href='../S/652.html#L126' title='Defined at 126 in third_party/google-perftools-1.8.3/src/tests/profiledata_unittest.cc.'>filename</a>,
<a id='L183' name='L183' />               <a href='../S/516.html#L71' title='Defined at 71 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>uint64</a> *<a href='../Y/2354.html' title='Multiple used in 9 places.'>file_mapping</a>, <a href='../S/516.html#L71' title='Defined at 71 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>uint64</a> *<a href='../Y/2357.html' title='Multiple used in 9 places.'>file_pages</a>,
<a id='L184' name='L184' />               <a href='../S/516.html#L71' title='Defined at 71 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>uint64</a> *<a href='../Y/1467.html' title='Multiple used in 9 places.'>anon_mapping</a>, <a href='../S/516.html#L71' title='Defined at 71 in third_party/google-perftools-1.8.3/src/base/basictypes.h.'>uint64</a> *<a href='../Y/1468.html' title='Multiple used in 9 places.'>anon_pages</a>,
<a id='L185' name='L185' />               <a href='../Y/2050.html' title='Multiple used in 5 places.'>dev_t</a> *<a href='../Y/2049.html' title='Multiple used in 12 places.'>dev</a>);
<a id='L186' name='L186' />
<a id='L187' name='L187' />  ~<a href='../D/2219.html' title='Multiple defined in 4 places.'>ProcMapsIterator</a>();
<a id='L188' name='L188' />
<a id='L189' name='L189' /> <a href='../Y/4261.html' title='Multiple used in 50 places.'>private</a>:
<a id='L190' name='L190' />  <strong class='reserved'>void</strong> <a href='../D/1261.html' title='Multiple defined in 10 places.'>Init</a>(<a href='../S/686.html#L392' title='Defined at 392 in third_party/google-perftools-1.8.3/src/windows/port.h.'>pid_t</a> <a href='../Y/4163.html' title='Multiple used in 46 places.'>pid</a>, <a href='../S/543.html#L103' title='Defined at 103 in third_party/google-perftools-1.8.3/src/base/sysinfo.h.'>Buffer</a> *<a href='../Y/1680.html' title='Multiple used in 109 places.'>buffer</a>, <a href='../Y/1648.html' title='Multiple used in 174 places.'>bool</a> <a href='../Y/5561.html' title='Multiple used in 7 places.'>use_maps_backing</a>);
<a id='L191' name='L191' />
<a id='L192' name='L192' />  <strong class='reserved'>char</strong> *<a href='../Y/2753.html' title='Multiple used in 21 places.'>ibuf_</a>;        <em class='comment'>// input buffer</em>
<a id='L193' name='L193' />  <strong class='reserved'>char</strong> *<a href='../Y/5104.html' title='Multiple used in 17 places.'>stext_</a>;       <em class='comment'>// start of text</em>
<a id='L194' name='L194' />  <strong class='reserved'>char</strong> *<a href='../Y/2247.html' title='Multiple used in 14 places.'>etext_</a>;       <em class='comment'>// end of text</em>
<a id='L195' name='L195' />  <strong class='reserved'>char</strong> *<a href='../Y/3816.html' title='Multiple used in 9 places.'>nextline_</a>;    <em class='comment'>// start of next line</em>
<a id='L196' name='L196' />  <strong class='reserved'>char</strong> *<a href='../Y/2151.html' title='Multiple used in 6 places.'>ebuf_</a>;        <em class='comment'>// end of buffer (1 char for a nul)</em>
<a id='L197' name='L197' /><em class='sharp'>#if</em> (<strong class='reserved'>defined</strong>(<a href='../Y/997.html' title='Multiple used in 42 places.'>_WIN32</a>) || <strong class='reserved'>defined</strong>(<a href='../Y/1053.html' title='Multiple used in 17 places.'>__MINGW32__</a>)) &amp;&amp; (!<strong class='reserved'>defined</strong>(<a href='../S/310.html#L11' title='Defined at 11 in src/arch.h.'>__CYGWIN__</a>) &amp;&amp; !<strong class='reserved'>defined</strong>(<a href='../Y/1035.html' title='Multiple used in 24 places.'>__CYGWIN32__</a>))
<a id='L198' name='L198' />  <a href='../Y/331.html' title='Multiple used in 28 places.'>HANDLE</a> <a href='../Y/4910.html' title='Multiple used in 6 places.'>snapshot_</a>;   <em class='comment'>// filehandle on dll info</em>
<a id='L199' name='L199' />  <em class='comment'>// In a change from the usual W-A pattern, there is no A variant of</em>
<a id='L200' name='L200' />  <em class='comment'>// MODULEENTRY32.  Tlhelp32.h #defines the W variant, but not the A.</em>
<a id='L201' name='L201' />  <em class='comment'>// We want the original A variants, and this #undef is the only</em>
<a id='L202' name='L202' />  <em class='comment'>// way I see to get them.  Redefining it when we're done prevents us</em>
<a id='L203' name='L203' />  <em class='comment'>// from affecting other .cc files.</em>
<a id='L204' name='L204' /><em class='sharp'># ifdef</em> <a href='../D/1789.html' title='Multiple defined in 3 places.'>MODULEENTRY32</a>  <em class='comment'>// Alias of W</em>
<a id='L205' name='L205' /><em class='sharp'>#   undef</em> <a href='../R/1591.html' title='Multiple refered from 4 places.'>MODULEENTRY32</a>
<a id='L206' name='L206' />  <a href='../D/1789.html' title='Multiple defined in 3 places.'>MODULEENTRY32</a> <a href='../Y/3582.html' title='Multiple used in 10 places.'>module_</a>;   <em class='comment'>// info about current dll (and dll iterator)</em>
<a id='L207' name='L207' /><em class='sharp'>#   define</em> <a href='../R/1591.html' title='Multiple refered from 4 places.'>MODULEENTRY32</a> MODULEENTRY32W
<a id='L208' name='L208' /><em class='sharp'># else</em>  <em class='comment'>// It's the ascii, the one we want.</em>
<a id='L209' name='L209' />  <a href='../D/1789.html' title='Multiple defined in 3 places.'>MODULEENTRY32</a> <a href='../Y/3582.html' title='Multiple used in 10 places.'>module_</a>;   <em class='comment'>// info about current dll (and dll iterator)</em>
<a id='L210' name='L210' /><em class='sharp'># endif</em>
<a id='L211' name='L211' /><em class='sharp'>#elif</em> <strong class='reserved'>defined</strong>(<a href='../Y/1051.html' title='Multiple used in 15 places.'>__MACH__</a>)
<a id='L212' name='L212' />  <strong class='reserved'>int</strong> <a href='../Y/1930.html' title='Multiple used in 6 places.'>current_image_</a>; <em class='comment'>// dll's are called "images" in macos parlance</em>
<a id='L213' name='L213' />  <strong class='reserved'>int</strong> <a href='../Y/1933.html' title='Multiple used in 7 places.'>current_load_cmd_</a>;   <em class='comment'>// the segment of this dll we're examining</em>
<a id='L214' name='L214' /><em class='sharp'>#elif</em> <strong class='reserved'>defined</strong>(<a href='../Y/1222.html' title='Multiple used in 5 places.'>__sun__</a>)     <em class='comment'>// Solaris</em>
<a id='L215' name='L215' />  <strong class='reserved'>int</strong> <a href='../Y/2341.html' title='Multiple used in 15 places.'>fd_</a>;
<a id='L216' name='L216' />  <strong class='reserved'>char</strong> <a href='../Y/1927.html' title='Multiple used in 4 places.'>current_filename_</a>[<a href='../D/2066.html' title='Multiple defined in 3 places.'>PATH_MAX</a>];
<a id='L217' name='L217' /><em class='sharp'>#else</em>
<a id='L218' name='L218' />  <strong class='reserved'>int</strong> <a href='../Y/2341.html' title='Multiple used in 15 places.'>fd_</a>;            <em class='comment'>// filehandle on /proc/*/maps</em>
<a id='L219' name='L219' /><em class='sharp'>#endif</em>
<a id='L220' name='L220' />  <a href='../S/686.html#L392' title='Defined at 392 in third_party/google-perftools-1.8.3/src/windows/port.h.'>pid_t</a> <a href='../Y/4164.html' title='Multiple used in 4 places.'>pid_</a>;
<a id='L221' name='L221' />  <strong class='reserved'>char</strong> <a href='../Y/2403.html' title='Multiple used in 5 places.'>flags_</a>[10];
<a id='L222' name='L222' />  <a href='../S/543.html#L103' title='Defined at 103 in third_party/google-perftools-1.8.3/src/base/sysinfo.h.'>Buffer</a>* <a href='../Y/2137.html' title='Multiple used in 5 places.'>dynamic_buffer_</a>;  <em class='comment'>// dynamically-allocated Buffer</em>
<a id='L223' name='L223' />  <a href='../Y/1648.html' title='Multiple used in 174 places.'>bool</a> <a href='../Y/5573.html' title='Multiple used in 3 places.'>using_maps_backing_</a>; <em class='comment'>// true if we are looking at maps_backing instead of maps.</em>
<a id='L224' name='L224' /><em class='brace'>}</em>;
<a id='L225' name='L225' />
<a id='L226' name='L226' /><em class='sharp'>#endif</em>  <em class='comment'>/* #ifndef SWIG */</em>
<a id='L227' name='L227' />
<a id='L228' name='L228' /><em class='comment'>// Helper routines</em>
<a id='L229' name='L229' />
<a id='L230' name='L230' /><a href='../Y/3671.html' title='Multiple used in 66 places.'>namespace</a> <a href='../D/5409.html' title='Multiple defined in 10 places.'>tcmalloc</a> <em class='brace'>{</em>
<a id='L231' name='L231' /><strong class='reserved'>int</strong> <a href='../S/542.html#L935' title='Defined at 935 in third_party/google-perftools-1.8.3/src/base/sysinfo.cc.'>FillProcSelfMaps</a>(<strong class='reserved'>char</strong> <a href='../Y/1671.html' title='Multiple used in 330 places.'>buf</a>[], <strong class='reserved'>int</strong> <a href='../S/555.html#L187' title='Defined at 187 in third_party/google-perftools-1.8.3/src/debugallocation.cc.'>size</a>, <a href='../Y/1648.html' title='Multiple used in 174 places.'>bool</a>* <a href='../Y/5708.html' title='Multiple used in 7 places.'>wrote_all</a>);
<a id='L232' name='L232' /><strong class='reserved'>void</strong> <a href='../D/654.html' title='Multiple defined in 2 places.'>DumpProcSelfMaps</a>(<a href='../D/2368.html' title='Multiple defined in 2 places.'>RawFD</a> <a href='../Y/2340.html' title='Multiple used in 181 places.'>fd</a>);
<a id='L233' name='L233' /><em class='brace'>}</em>
<a id='L234' name='L234' />
<a id='L235' name='L235' /><em class='sharp'>#endif</em>   <em class='comment'>/* #ifndef _SYSINFO_H_ */</em>
</pre>
<hr />
<a id='BOTTOM' name='BOTTOM' />
<em class='comment'>/* [&lt;][&gt;][^][v]<a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</em>
</body>
</html>
